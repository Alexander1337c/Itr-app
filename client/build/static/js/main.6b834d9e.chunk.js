(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{100:function(e,t,a){},120:function(e,t,a){},121:function(e,t,a){},122:function(e,t,a){},242:function(e,t,a){},243:function(e,t,a){},244:function(e,t,a){},245:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(55),l=a.n(r),o=(a(100),a(10)),s=(a(101),a(12)),i=a(1),u=a.n(i),d=a(3),m=a(4),h=function(){var e=Object(n.useState)(!1),t=Object(m.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(null),l=Object(m.a)(r,2),o=l[0],s=l[1];return{loading:a,request:Object(n.useCallback)(function(){var e=Object(d.a)(u.a.mark((function e(t){var a,n,r,l,o,i=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.length>1&&void 0!==i[1]?i[1]:"GET",n=i.length>2&&void 0!==i[2]?i[2]:null,r=i.length>3&&void 0!==i[3]?i[3]:{},c(!0),e.prev=4,n&&(n=JSON.stringify(n),r["Content-Type"]="application/json"),e.next=8,fetch(t,{method:a,body:n,headers:r});case 8:return l=e.sent,console.log("message",l),e.next=12,l.json();case 12:if(o=e.sent,l.ok){e.next=15;break}throw new Error(o.message||"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a");case 15:return c(!1),e.abrupt("return",o);case 19:throw e.prev=19,e.t0=e.catch(4),c(!1),s(e.t0.message),e.t0;case 24:case"end":return e.stop()}}),e,null,[[4,19]])})));return function(t){return e.apply(this,arguments)}}(),[]),error:o,clearError:Object(n.useCallback)((function(){return s(null)}),[])}};function p(){}var f=Object(n.createContext)({token:null,userId:null,login:p,logout:p,isAuthenticated:!1}),b=function(){return c.a.createElement("div",{style:{display:"flex",justifyContent:"center",paddingTop:"2rem"}},c.a.createElement("div",{className:"preloader-wrapper active"},c.a.createElement("div",{className:"spinner-layer spinner-red-only"},c.a.createElement("div",{className:"circle-clipper left"},c.a.createElement("div",{className:"circle"})),c.a.createElement("div",{className:"gap-patch"},c.a.createElement("div",{className:"circle"})),c.a.createElement("div",{className:"circle-clipper right"},c.a.createElement("div",{className:"circle"})))))},E=a(94),k=a(23),v=a(24),g=a(27),O=a(25),j=a(17),w=a(28),N=a(18),x=a.n(N),y=(a(120),function(e){function t(e){var a;return Object(k.a)(this,t),(a=Object(g.a)(this,Object(O.a)(t).call(this,e))).clicked=function(e){if(e.target.checked)for(var t=0,n=(c=document.getElementsByName("rowSelectCheckBox")).length;t<n;t++)c[t].checked=!0,a.checkedId=[],a.checkedId=a.props.users.map((function(e){return e._id}));else{var c;for(t=0,n=(c=document.getElementsByName("rowSelectCheckBox")).length;t<n;t++)c[t].checked=!1,a.checkedId=[]}console.log(a.checkedId)},a.checkedId=[],a.handleClick=function(e,t){e.target.checked?!1===a.checkedId.includes(t)&&(a.checkedId=[].concat(Object(E.a)(a.checkedId),[t])):a.checkedId=a.checkedId.filter((function(e){return e!==t})),console.log(a.checkedId)},a.deleteUser=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=0;t<=a.checkedId.length;t++)try{x.a.delete("https://dry-headland-43985.herokuapp.com/api/users/"+a.checkedId[t]).then((function(e){console.log(e.data)})),JSON.parse(localStorage.getItem("userData")).userId===a.checkedId[t]&&(localStorage.removeItem("userData"),window.location.href="/"),a.setState({users:a.state.users.filter((function(e){return e._id!==a.checkedId[t]}))}),console.log(a.checkedId[t]),window.location.reload()}catch(n){}case 1:case"end":return e.stop()}}),e)}))),a.blockUser=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=0;t<=a.checkedId.length;t++)try{x.a.put("https://dry-headland-43985.herokuapp.com/api/users/update-block/"+a.checkedId[t]).then((function(e){console.log(e.data)})),JSON.parse(localStorage.getItem("userData")).userId===a.checkedId[t]&&(localStorage.removeItem("userData"),window.location.href="/"),console.log(a.checkedId[t]),window.location.reload()}catch(n){}case 1:case"end":return e.stop()}}),e)}))),a.unblockUser=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=0;t<=a.checkedId.length;t++)try{x.a.put("https://dry-headland-43985.herokuapp.com/api/users/update-unblock/"+a.checkedId[t]).then((function(e){console.log(e.data)})),JSON.parse(localStorage.getItem("userData")).userId===a.checkedId[t]&&(localStorage.removeItem("userData"),window.location.href="/users"),a.setState({users:a.state.users.filter((function(e){return e._id!==a.checkedId[t]}))}),console.log(a.checkedId[t]),window.location.reload()}catch(n){}case 1:case"end":return e.stop()}}),e)}))),a.handleClick=a.handleClick.bind(Object(j.a)(a)),a.deleteUser=a.deleteUser.bind(Object(j.a)(a)),a.clicked=a.clicked.bind(Object(j.a)(a)),a.deleteUser=a.deleteUser.bind(Object(j.a)(a)),a.state={users:[],checkedId:[]},a}return Object(w.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){var e=this;x.a.get("https://dry-headland-43985.herokuapp.com/api/users").then((function(t){e.setState({users:t.data})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"table"},c.a.createElement("h3",null,"\u0422\u0430\u0431\u043b\u0438\u0446\u0430 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439"),c.a.createElement("table",{className:"table"},c.a.createElement("thead",{className:"thead-light"},c.a.createElement("tr",null,c.a.createElement("th",null,c.a.createElement("label",null,c.a.createElement("input",{type:"checkbox",id:"scales",onClick:this.clicked}),c.a.createElement("span",null))),c.a.createElement("th",null,"Id"),c.a.createElement("th",null,"\u0418\u043c\u044f"),c.a.createElement("th",null,"Email"),c.a.createElement("th",null,"\u0414\u0430\u0442\u0430 \u0440\u0435\u0433."),c.a.createElement("th",null,"\u0414\u0430\u0442\u0430 \u043f\u043e\u0441\u043b. \u043b\u043e\u0433"),c.a.createElement("th",null,"\u0421\u0442\u0430\u0442\u0443\u0441"))),c.a.createElement("tbody",null,this.props.users.map((function(t,a){return c.a.createElement("tr",{key:t._id,className:"list"},c.a.createElement("td",null,c.a.createElement("label",null,c.a.createElement("input",{type:"checkbox",id:"scale",name:"rowSelectCheckBox",onClick:function(a){return e.handleClick(a,t._id)}}),c.a.createElement("span",null))),c.a.createElement("td",null,a+1),c.a.createElement("td",null,t.name),c.a.createElement("td",null,t.email),c.a.createElement("td",null,new Date(t.regDate).toLocaleString("ru")),c.a.createElement("td",null,new Date(t.loginDate).toLocaleString("ru")),c.a.createElement("td",null,t.status))})))),c.a.createElement("a",{href:"#",className:"waves-effect red darken-1 btn-small ",onClick:this.deleteUser},c.a.createElement("i",{className:"material-icons"},"delete")),c.a.createElement("a",{href:"#",className:"waves-effect red lighten-4 btn-small",onClick:this.blockUser},c.a.createElement("i",{className:"material-icons"},"block")),c.a.createElement("a",{href:"#",className:"waves-effect green darken-1 btn-small",onClick:this.unblockUser},"\u0420\u0430\u0437\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c"))}}]),t}(n.Component)),C=function(){var e=Object(n.useState)([]),t=Object(m.a)(e,2),a=t[0],r=t[1],l=h(),o=l.loading,s=l.request,i=Object(n.useContext)(f).token,p=Object(n.useCallback)(Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s("/api/users","GET",null,{Authorization:"Bearer ".concat(i)});case 3:t=e.sent,r(t),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])}))),[i,s]);return Object(n.useEffect)((function(){p()}),[p]),o?c.a.createElement(b,null):c.a.createElement(c.a.Fragment,null,!o&&c.a.createElement(y,{users:a}))},I=a(26),S=a(13),F=(a(121),a(122),["#FFFFFF","#80D8FF","#FFFF8D","#FF8A80","#CCFF90","#CFD8DC","#FFD180"]),D=function(e){function t(){return Object(k.a)(this,t),Object(g.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"ColorPicker"},F.map((function(t){return c.a.createElement("div",{key:t,className:{selected:e.props.value===t},style:{backgroundColor:t},onClick:e.props.onChange.bind(null,t)})})))}}]),t}(c.a.Component),_=function(){Object(s.g)();var e=Object(n.useContext)(f),t=h().request,a=Object(n.useState)({title:"",text:"",color:"#fff"}),r=Object(m.a)(a,2),l=r[0],o=r[1],i=function(){var a=Object(d.a)(u.a.mark((function a(n){var c;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t("/api/notes","POST",Object(S.a)({},l),{Authorization:"Bearer ".concat(e.token)});case 3:c=a.sent,window.location.reload(),console.log(c),o({title:"",text:"",color:"#fff"}),a.next=11;break;case 9:a.prev=9,a.t0=a.catch(0);case 11:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e){return a.apply(this,arguments)}}(),p=function(e){o(Object(S.a)({},l,Object(I.a)({},e.target.name,e.target.value)))};return c.a.createElement("div",{className:"NoteEditor"},c.a.createElement("input",{type:"text",className:"NoteEditor__title",placeholder:"Enter title",value:l.title,name:"title",onChange:p}),c.a.createElement("textarea",{placeholder:"Enter note text",rows:5,className:"NoteEditor__text",value:l.text,name:"text",onChange:p}),c.a.createElement("div",{className:"NoteEditor__footer"},c.a.createElement(D,{name:"color",value:l.color,onChange:function(e){o(Object(S.a)({},l,{color:e}))}}),c.a.createElement("button",{className:"NoteEditor__button",disabled:!l.text,onClick:i},"Add")))},B=a(93),U=a.n(B),T=(a(242),function(e){var t=e.notes;h().request;if(!t.length)return c.a.createElement("p",{className:"center"},"\u0421\u0441\u044b\u043b\u043e\u043a \u043f\u043e\u043a\u0430 \u043d\u0435\u0442");console.log(t);return c.a.createElement(U.a,{className:"NoteList",options:{itemSelector:".Note",columnWidth:250,gutter:10,isFitWidth:!0}},t.map((function(e){return c.a.createElement("div",{className:"Note",style:{backgroundColor:"".concat(e.color)}},c.a.createElement("span",{className:"Note__del-icon",onClick:function(){return t=e._id,x.a.delete("https://dry-headland-43985.herokuapp.com/api/notes/"+t).then((function(e){console.log(e.data)})),void window.location.reload();var t}}," \xd7 "),e.title?c.a.createElement("h4",{className:"Note__title"},e.title):null,c.a.createElement("div",{className:"Note__text"},e.text))})))}),J=function(){var e=Object(n.useState)([]),t=Object(m.a)(e,2),a=t[0],r=t[1],l=h(),o=l.loading,s=l.request,i=Object(n.useContext)(f).token,p=Object(n.useCallback)(Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s("/api/notes","GET",null,{Authorization:"Bearer ".concat(i)});case 3:t=e.sent,r(t),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])}))),[i,s]);return Object(n.useEffect)((function(){p()}),[p]),o?c.a.createElement(b,null):c.a.createElement(c.a.Fragment,null,!o&&c.a.createElement(T,{notes:a}))},A=(a(243),function(e){function t(){return Object(k.a)(this,t),Object(g.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"Sticky"},c.a.createElement("h2",{className:"Sticky_header"},"\u0421\u0442\u0438\u043a\u0435\u0440\u044b"),c.a.createElement(_,null),c.a.createElement(J,null))}}]),t}(c.a.Component)),q=function(){return c.a.createElement("div",null,c.a.createElement(A,null))},P=(a(244),function(){var e=Object(n.useContext)(f),t=Object(n.useCallback)((function(e){window.M&&e&&window.M.toast({html:e})}),[]),a=h(),r=a.loading,l=a.error,o=a.request,s=a.clearError,i=Object(n.useState)({email:"",password:"",name:"",loginDate:""}),p=Object(m.a)(i,2),b=p[0],E=p[1];Object(n.useEffect)((function(){t(l),s()}),[l,t,s]),Object(n.useEffect)((function(){window.M.updateTextFields()}),[]);var k=function(e){E(Object(S.a)({},b,Object(I.a)({},e.target.name,e.target.value)))},v=function(){var e=Object(d.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o("/api/auth/register","POST",Object(S.a)({},b));case 3:a=e.sent,console.log(a),t(a.message),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),g=function(){var t=Object(d.a)(u.a.mark((function t(){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o("/api/auth/login","POST",Object(S.a)({},b));case 3:a=t.sent,e.login(a.token,a.userId),console.log(a),t.next=10;break;case 8:t.prev=8,t.t0=t.catch(0);case 10:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}();return c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col s6 offset-s3"},c.a.createElement("h1",null,"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438"),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"card blue darken-1"},c.a.createElement("div",{className:"card-content white-text"},c.a.createElement("div",{className:"link"}),c.a.createElement("span",{className:"card-title"},"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"),c.a.createElement("div",null,c.a.createElement("div",{className:"input-field"},c.a.createElement("input",{placeholder:"\u0412\u0430\u0448\u0435 \u0438\u043c\u044f",id:"name",type:"text",name:"name",value:b.name,className:"yellow-input",onChange:k}),c.a.createElement("label",{htmlFor:"name"},"\u0418\u043c\u044f")),c.a.createElement("div",{className:"input-field"},c.a.createElement("input",{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 email",id:"email",type:"text",name:"email",value:b.email,className:"yellow-input",onChange:k}),c.a.createElement("label",{htmlFor:"email"},"Email")),c.a.createElement("div",{className:"input-field"},c.a.createElement("input",{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",id:"password",type:"password",name:"password",value:b.password,className:"yellow-input",onChange:k}),c.a.createElement("label",{htmlFor:"password"},"\u041f\u0430\u0440\u043e\u043b\u044c")))),c.a.createElement("div",{className:"card-action"},c.a.createElement("button",{className:"btn yellow darken-4 mar",disabled:r,onClick:g},"\u0412\u043e\u0439\u0442\u0438"),c.a.createElement("button",{className:"btn grey lighten-1 black-text",onClick:v,disabled:r},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"))))))}),M=function(){var e=Object(s.g)(),t=Object(n.useContext)(f);return c.a.createElement("nav",null,c.a.createElement("div",{className:"nav-wrapper"},c.a.createElement("span",{className:"brand-logo"},"Itr"),c.a.createElement("ul",{id:"nav-mobile",className:"right hide-on-med-and-down"},c.a.createElement("li",null,c.a.createElement(o.b,{to:"/table"},"\u0422\u0430\u0431\u043b\u0438\u0446\u0430")),c.a.createElement("li",null,c.a.createElement(o.b,{to:"/notes"},"\u0421\u0442\u0438\u043a\u0435\u0440\u044b")),c.a.createElement("li",null,c.a.createElement("a",{href:"/",onClick:function(a){a.preventDefault(),t.logout(),e.push("/")}},"\u0412\u044b\u0439\u0442\u0438")))))};var W=function(){var e=function(){var e=Object(n.useState)(null),t=Object(m.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(!1),l=Object(m.a)(r,2),o=l[0],s=l[1],i=Object(n.useState)(null),u=Object(m.a)(i,2),d=u[0],h=u[1],p=Object(n.useCallback)((function(e,t){c(e),h(t),localStorage.setItem("userData",JSON.stringify({userId:t,token:e}))}),[]),f=Object(n.useCallback)((function(){c(null),h(null),localStorage.removeItem("userData")}),[]);return Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userData"));e&&e.token&&p(e.token,e.userId),s(!0)}),[p]),{login:p,logout:f,token:a,userId:d,ready:o}}(),t=e.token,a=e.login,r=e.logout,l=e.userId,i=e.ready,u=!!t,d=function(e){return e?c.a.createElement(s.d,null,c.a.createElement(s.b,{path:"/users",exact:!0},c.a.createElement(C,null)),c.a.createElement(s.b,{path:"/notes",exact:!0},c.a.createElement(q,null)),c.a.createElement(s.a,{to:"/users"})):c.a.createElement(s.d,null,c.a.createElement(s.b,{path:"/",exact:!0},c.a.createElement(P,null)),c.a.createElement(s.a,{to:"/"}))}(u);return i?c.a.createElement(f.Provider,{value:{token:t,login:a,logout:r,userId:l,isAuthenticated:u}},c.a.createElement(o.a,null,u&&c.a.createElement(M,null),c.a.createElement("div",{className:"container"},d))):c.a.createElement(b,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(c.a.createElement(W,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},95:function(e,t,a){e.exports=a(245)}},[[95,1,2]]]);
//# sourceMappingURL=main.6b834d9e.chunk.js.map